<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta name="description" content="MCC Web Design & Development Slides" />
    <meta name="author" content="Jamie Vaughn" />
    <title>MVC Slides</title>
    <!-- Inspire css -->
    <link href="../lib/inspire.css" rel="stylesheet" />
    <link href="../lib/theme.css" rel="stylesheet" />
    <link href="../lib/talk.css" rel="stylesheet" />
    <link href="../lib/utils.css" rel="stylesheet" />

    <!-- Custom css -->
    <link rel="stylesheet" href="../laser/laser.css" />
    <script src="https://cdn.master.co/css"></script>
    <style>
      /* d3 force graph */
      circle {
        fill: crimson;
      }
      line {
        stroke: wheat;
        stroke-width: 2px;
        filter: drop-shadow(0 0 1px firebrick);
      }
      text {
        text-anchor: middle;
        font-family: "Helvetica Neue", Helvetica, sans-serif;
        fill: #666;
        font-size: 16px;
      }
      polyline {
        stroke: silver;
        stroke-width: 3;
        stroke-linecap: round;
      }
      .ATL {
        color: white;
        position: absolute;
        font-size: 3rem;
        font-weight: bold !important;
        right: 10%;
        top: 10%;
      }
    </style>
  </head>

  <body
    class="language-markup"
    data-prism-plugins="normalize-whitespace"
    data-duration="30"
  >
    <header id="intro" class="slide">
      <h1>Javascript Design Patterns</h1>
      <h2>MVC</h2>
      <p class="attribution">MCC: Section 2</p>
    </header>
    <section>
      <header class="slide">
        <h2>Design Patterns</h2>
        <h1>Patterns for Code Organization</h1>
      </header>
      <article class="slide">
        <h2>The Saga of the Dragon Clicker App</h2>
        <p>A story about being a programmer hired by a needy client</p>
        <p>...and <strong>YOU</strong> are the protagonist!</p>
      </article>
      <article class="slide">
        <h2>Your Hired!!</h2>
        <p>I'm your new project manager at our new Dev Agency</p>
        <img
          src="img/ctrl-alt-logo.png"
          style="background: white; padding: 1rem; border-radius: 1rem"
        />
        <p>It's called "Control Alt Develop"</p>
        <ul>
          <li>
            I've spoken with our client and I'll be sharing the project reqs
            with you
          </li>
          <li>
            This client's needs seem easy we're sticking with vanilla JS (no
            framework)
          </li>
          <li>...but there might be some scaling surprises in store...</li>
        </ul>
      </article>
      <article class="slide">
        <h2>Dragon üêâ Clicker</h2>
        <ul>
          <strong>Project Requirements:</strong>
          <li>The application should display a üêâ and a number of clicks.</li>
          <li>The number of clicks should increment when the üêâ is clicked.</li>
          <li>
            Specifics of layout/style are up to you (but keep affordances & UX
            in mind)
          </li>
          <li>Open a new Github repo and post your solution there</li>
          <li>Remember events and event listeners?</li>
        </ul>
        <pre class="language-js"><code>let div = document.querySelector('.dragon');
div.addEventListener('click', function(e){
  //the element has been clicked... 
  // do stuff here, like increment the counter variable
});</code></pre>
      </article>
      <article class="slide">
        <h2>How did you solve this?</h2>
        <p class="delayed">
          How about mutating a global variable in the listener callback?
        </p>
        <p class="delayed">It's simple. But it works!</p>
        <pre class="language-js delayed"><code>let clicks = 0
let dragon = document.querySelector('.dragon')
dragon.addEventListener('click', function(e){
  // update our app data:
  clicks += 1
  // rerender what our app displays:
  dragon.innerText = 'üêâ ' + clicks 
});</code></pre>
      </article>
      <article class="slide">
        <h2>What do you think of this solution?</h2>
        <p>Is it scaleable?</p>
        <p>Is it easy to manage or add to?</p>
        <p>
          Could another developer join the project and easily understand the
          app?
        </p>
      </article>
      <article class="slide">
        <h2>Leveling up our Git Skills</h2>
        <p>
          Create a short blog post (1 or 2 paragraphs) that explain how you
          solved this challenge and why
        </p>
        <h3>Git Project:</h3>
        <ul>
          <li>
            <strong>Fork</strong> this repo:
            <code>
              <a href="https://github.com/JamieVaughn/reflections">
                /reflections
              </a>
            </code>
          </li>
          <li>
            Create a Markdown file in the <code id="current-year"></code> folder
            with your name as the title (i.e. <code>JonDoe.md</code>)
          </li>
          <li>Write your reflections paragraphs in that markdown file</li>
          <li>Remember our markdown syntax?</li>
          <li>Commit your changes to your forked repo</li>
          <li>
            Open a <strong>Pull Request</strong> against the original
            <code>/reflections</code>
            repo
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>The Client Called, Reqs have changed üò£</h2>
        <p>
          It's typical for reqs to change several times over the development
          lifecycle. To survive as a developer we'll have to learn to roll with
          it & be adaptive.
        </p>
        <p>All software development is an iterative process</p>
        <p>(i.e. many steps - Mostly forward, a few backward)</p>
        <ul>
          <strong>Common Reasons for Req changes:</strong>
          <li>Client's business needs change</li>
          <li>Audience changes and/or new data about the intended audience</li>
          <li>Technical constraints discovered during development</li>
          <li>Security concerns arise</li>
        </ul>
      </article>
      <article class="slide">
        <h2>Dragon üé≠ Duo</h2>
        <p>Same app, <strong>TWICE THE DRAGONS!</strong></p>
        <p>The client now wants 2 dragons. Can we do it?</p>
        <ul>
          <strong>Client's new Reqs:</strong>
          <li>Display two üêâs on the screen</li>
          <li>Display the type of each dragon above it</li>
          <ul>
            <li>
              They like elemental dragons, so how about <u>Fire</u> &
              <u>Water</u> dragons?
            </li>
          </ul>
          <li>Use CSS to style the different dragon types distinctly</li>
          <li>Show the number of clicks next to each associated dragon</li>
          <li>Click counts should increment independently of each other</li>
        </ul>
        <!-- <detail class="notes"> 2Ô∏è‚É£ üéè </detail> -->
      </article>
      <article class="slide">
        <h2>Reflections</h2>
        <p>We could just add a second variable and eventListener...</p>
        <p class="delayed">
          But, that's more loose global variables... Would that continue to
          scale?
        </p>
        <ul class="delayed">
          <li>Are you happy with your method of üêâ duplication?</li>
          <li>Is it scalable?</li>
          <li>Did you "hard-code" anything in the js or css?</li>
          <li>
            Is your code <strong class="highlight3">D.R.Y.</strong> or
            <strong class="highlight3">W.E.T.?</strong>
          </li>
          <ul>
            <li>
              <u>D</u>on't <u>R</u>epeat <u>Y</u>ourself <strong>vs.</strong>
              <u>W</u>rite <u>E</u>verything <u>T</u>hrice!
            </li>
            <li class="delayed">Did you duplicate code anywhere?</li>
            <li class="delayed">
              Repeating code twice isn't so bad... but three times is a sign to
              refactor.
            </li>
            <li class="delayed">
              Can you share a technique of encapsulation or D.R.Y. coding you
              used?
            </li>
            <li class="delayed">
              Try using a few functions to re-use more code
            </li>
          </ul>
        </ul>
      </article>
      <article class="slide">
        <h2>Dragon üåÜ City</h2>
        <em>This client is getting needy!</em>
        <p>They loved <strong>Dragon üé≠ Duo</strong> so much that they want <strong style="position: relative; background: linear-gradient(45deg, black 45%, transparent 50%);">MORE DRAGONS!<img src="img/more_kylo.jpg" style="position: absolute; bottom: 40%; left: 0; min-height: 200px; z-index: -1;"></strong></p>
        <p>The client would like at least <u>5 clickable dragons.</u></p>
        <ul><strong>With these elemental types</strong>
          <div class="col-2">
          <li>Fire</li>
          <li>Water</li>
          <li>Earth</li>
          <li>Air</li>
          <li>Aether</li>
          <li>Be creative!</li>
        </div>
        </ul>
        <div class="tilt-stamp delayed">
					<p style="text-align: center;">At this scale,</p>
					<p style="text-align: center;">the simple approach</p>
					<p style="text-align: center;">isn't gonna cut it.</p>
					<p style="text-align: center;">We need a better way.</p>
				</div>
      </article>
      <article class="slide">
        <h2>Is there a better way to solve it?</h2>
        <div class="flex">
          <div>
            <h3 class="delayed">Javascript</h3>
            <ul><strong class="delayed">Could we...</strong>
              <li class="delayed">
                put <code>clicks</code> variables into objects?
              </li>
              <li class="delayed">
                use a <code>dragonStamper</code> function?
              </li>
              <li class="delayed">use the <code>onclick</code> attribute? <br><a href="https://www.w3schools.com/tags/ev_onclick.asp">Simple Example</a>, <a href="https://javascript.info/introduction-browser-events">Detailed Article</a></li>
            </ul>
          </div>
          <div class="delayed">
            <h3>Styling</h3>
            <ul><strong class="delayed">Could we...</strong>
              <li class="delayed">
                have a CSS class like <code>.dragon</code> for the default dragon appearance?
              </li>
              <li class="delayed">
                and classes like <code>.fire</code>,  <code>.water</code>, etc to customize each dragon type?
              </li>
              <!-- <li class="delayed">
                How about using CSS <code>filter: hue-rotate();</code> perhaps?
              </li> -->
            </ul>
          </div>
        </div>
      </article>
      <article class="slide">
        <h2>As a precursor to JS Frameworks...</h2>
        <p>
          Before we dive into a framework like React, <br />let's explore
          patterns for reusing and organizing code and how it helps us make
          repeated tasks easier...
        </p>
        <p class="delayed">Introducing: Design Patterns!</p>
        <strong class="delayed"
          >Some Examples from the
          <a href="https://www.gofpatterns.com/">"Gang Of Four"</a>
          book:</strong
        >
        <ul class="delayed" style="columns: 2">
          <li>
            <u style="text-decoration-color: crimson">Factory Method Pattern</u>
          </li>
          <li><u style="text-decoration-color: crimson">Command Pattern</u></li>
          <li>State Pattern</li>
          <li>Strategy Pattern</li>
          <li>Observer Pattern</li>
          <li>Singleton Pattern</li>
        </ul>
      </article>
      <article class="slide">
        <h2>Design Patterns</h2>
        <p>
          <a href="https://www.dofactory.com/javascript/design-patterns/"
            >GoF Patterns for Javascript Developers</a
          >
        </p>
        <ul style="list-style: none">
          <li>
            <details>
              <summary class="highlight3">Creational</summary>
              <ol style="font-size: 75%">
                <li>
                  <strong class="highlight">Singleton</strong> restricts the
                  initialization of a class to ensure that only one instance of
                  the class can be created.
                </li>
                <li>
                  <strong class="highlight">Factory</strong> extracts the
                  responsibility of instantiating a object from the class to a
                  reusable function.
                </li>
                <li>
                  <strong class="highlight">Abstract Factory</strong> Allows us
                  to create a Factory for factory classes.
                </li>
                <li>
                  <strong class="highlight">Builder</strong> Creating an object
                  step by step and a method to finally get the object instance.
                </li>
                <li>
                  <strong class="highlight">Prototype</strong> Creating a new
                  object instance from another similar instance and then modify
                  according to our requirements.
                </li>
              </ol>
            </details>
          </li>
          <li>
            <details>
              <summary class="highlight3">Structural</summary>
              <ol style="font-size: 75%">
                <li>
                  <strong class="highlight">Adapter</strong> Provides an
                  interface between two unrelated entities so that they can work
                  together.
                </li>
                <li>
                  <strong class="highlight">Composite</strong> Used when we have
                  to implement a part-whole hierarchy. For example, a diagram
                  made of other pieces such as circle, square, triangle, etc.
                </li>
                <li>
                  <strong class="highlight">Proxy</strong> Provide a surrogate
                  or placeholder for another object to control access to it.
                </li>
                <li>
                  <strong class="highlight">Flyweight</strong> Caching and
                  reusing object instances, used with immutable objects. For
                  example, string pool.
                </li>
                <li>
                  <strong class="highlight">Facade</strong> Creating a wrapper
                  interface on top of existing interfaces to help client
                  applications.
                </li>
                <li>
                  <strong class="highlight">Bridge</strong> used to decouple the
                  interfaces from implementation and hiding the implementation
                  details from the client program.
                </li>
                <li>
                  <strong class="highlight">Decorator</strong> used to modify
                  the functionality of an object at runtime.
                </li>
              </ol>
            </details>
          </li>
          <li>
            <details>
              <summary class="highlight3">Behavioral</summary>
              <ol style="font-size: 75%">
                <li>
                  <strong class="highlight">Template Method</strong> used to
                  create a template method stub and defer some of the steps of
                  implementation to the subclasses.
                </li>
                <li>
                  <strong class="highlight">Mediator</strong> used to provide a
                  centralized communication medium between different objects in
                  a system.
                </li>
                <li>
                  <strong class="highlight">Chain of Responsibility</strong>
                  used to achieve loose coupling in software design where a
                  request from the client is passed to a chain of objects to
                  process them.
                </li>
                <li>
                  <strong class="highlight">Observer</strong> useful when you
                  are interested in the state of an object and want to get
                  notified whenever there is any change.
                </li>
                <li>
                  <strong class="highlight">Strategy</strong> used when we have
                  multiple algorithm for a specific task and client decides the
                  actual implementation to be used at runtime.
                </li>
                <li>
                  <strong class="highlight">Command</strong> used to implement
                  lose coupling in a request-response model.
                </li>
                <li>
                  <strong class="highlight">State Design Pattern</strong> used
                  when an Object change it‚Äôs behavior based on it‚Äôs internal
                  state.
                </li>
                <li>
                  <strong class="highlight">Visitor</strong> used when we have
                  to perform an operation on a group of similar kind of Objects.
                </li>
                <li>
                  <strong class="highlight">Interpreter</strong> defines a
                  grammatical representation for a language and provides an
                  interpreter to deal with this grammar.
                </li>
                <li>
                  <strong class="highlight">Iterator</strong> used to provide a
                  standard way to traverse through a group of Objects.
                </li>
                <li>
                  <strong class="highlight">Memento</strong> used when we want
                  to save the state of an object so that we can restore later
                  on.
                </li>
              </ol>
            </details>
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>Factory Method Pattern</h2>
        <h3>a.k.a The Factory Function</h3>
        <p>
          It is a function that returns an object. So it's similar to a
          constructor pattern, but without the <code>class</code>,
          <code>this</code> or <code>new</code> keywords
        </p>
        <div style="position: relative">
          <pre
            class="language-js"
            style="position: relative"
          ><code>factoryFunction(name, carMake, age) {
  const canDrive = age > 16 ? true : false

  return {
    name,
    carMake,
    canDrive,
    id: Math.random(),
    timestamp: Date.now()
  }
}
const bobby = factoryFunction('Bobby', 'Ford', 23)
        </code></pre>
          <pre
            class="delayed language-js"
            style="position: absolute; top: -7%"
          ><code>factoryFunction(name, carMake, age) {
  const canDrive = age > 16 ? true : false
  // You can return a frozen object too!
  return Object.freeze({
    name,
    carMake,
    canDrive,
    id: Math.random(),
    timestamp: Date.now()
  })
}
const bobby = factoryFunction('Bobby', 'Ford', 23)
                  </code></pre>
        </div>
      </article>
      <article class="slide">
        <h2>The Command Pattern</h2>
        <h3>Event Dispatching with Enums</h3>
        <ul>
          <li>
            <strong class="highlight3">What's an Enum?</strong> It's one string
            value in a list of discrete string values
          </li>
          <li>
            <strong class="highlight3">Command pattern</strong>: use enums to
            indicate one of several available user actions that the UI supports
          </li>
          <li>
            For example, a specific button the user clicks will trigger a
            discrete, deterministic change in our app's state.
          </li>
          <li>
            <strong>Discrete User Actions</strong>: map one UI element to one
            dispatchable action to maintain determinism.
          </li>
        </ul>
        <pre class="language-js"><code>// normally: 
plusButton.addEventListener('click', () => increment())
// but we can provide enums to functions to adjust their behavior:
delayedButton.addEventListener('click', () => increment('withDelay'))
plus2Button.addEventListener('click', () => increment('by2'))</code></pre>
      </article>
      <article class="slide">
        <h1>The Client Called Again with new Reqs!!</h1>
        <h2>üò±</h2>
      </article>
      <article class="slide">
        <h2>Dragon üß¨ Spawner</h2>
        <ul>
          <li>
            A topbar <code>nav</code> with a list of at least 5 dragon types
            <ul>
              <li>
                They still enjoy elemental dragons like Fire, Water, Earth &
                Air, but be creative with the rest!
              </li>
            </ul>
          </li>
          <li>A separate area to display the üêâ's themselves</li>
          <li>
            The display area should show the üêâ's type, icon, and click count
          </li>
          <li>
            When the dragon type in the <code>nav</code> is clicked, a new üêâ of
            the type that was clicked should be added to the display area (i.e.
            so you could have two separate fire dragons sitting next to other
            dragons)
          </li>
          <li>
            Click count must be unique to each üêâ & increment when clicked
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>Working from a Design Wireframe</h2>
        <img src="img/dragon_spawner.jpg" alt="" />
      </article>
      <article class="slide">
        <h2>Reminder on Code Organization with Closures & Classes</h2>
        <p>Here's a Closure example:</p>
        <pre class="language-js"><code>function updateClicks() {
  // private API
  let clicks = 0;
  // public API
  return function reportClicks() {
    clicks += 1;
    console.log(clicks);
    return clicks;
  };
}

// create two Closures with independent clicks
const closure1 = updateClicks();
const closure2 = updateClicks();</code></pre>
      </article>
      <article class="slide">
        <h2>Reflections</h2>
        <ul>
          <li>How much harder was that?</li>
          <li>How do you like your solution?</li>
          <li>Are there any problems with it that you foresee as it scales?</li>
          <li>Do you think it could adapt easily to yet more changes?</li>
          <li>
            Do you feel your code is brittle or flexible? Simple or Complicated?
          </li>
          <li>
            Were you able to separate out any of your code into distinct chunks
            with singular jobs?
            <ul>
              <li>
                ..using modules, factory functions, closures, classes or data
                structures
              </li>
            </ul>
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>The Tools vs. The Blueprints</h2>
        <img class="delayed" style="width: 800px" src="img/tools.jpeg" alt="" />
        <div
          class="flex"
          style="position: absolute; bottom: 0; max-height: 75vh"
        >
          <figure
            class="delayed flex-col"
            style="margin: 0; text-align: center"
          >
            <img
              src="img/gear_pump.png"
              alt=""
              style="vertical-align: bottom"
            />
            <p
              style="
                background: white;
                color: black;
                margin: 0;
                padding: 1rem;
                max-width: 55vw;
              "
            >
              Subassemblies of Code that slot into an entire application
            </p>
          </figure>
          <img class="delayed" src="img/wind_turbine.jpeg" alt="" />
        </div>
      </article>
      <article class="slide">
        <h2>Spaghetti Code</h2>
        <p class="delayed">
          ...is when a codebase has <strong>many connections</strong> and
          <strong>no organization</strong>
        </p>
        <div class="flex delayed">
          <svg
            class="nohub"
            style="cursor: pointer"
            width="600"
            height="450"
            viewBox="200 150 200 160"
            onclick="addPhone(event)"
          >
            <g class="nohub-links"></g>
            <g class="nohub-nodes"></g>
          </svg>
          <div>
            <p>Number of Phones: <span class="node-annotation">2</span></p>
            <p>Number of Connections: <span class="cxn-annotation">1</span></p>
          </div>
        </div>
        <figure
          class="delayed tilt-stamp"
          style="
            text-align: right;
            transform: rotate(-15deg) translate(5%, 20%);
            border: none;
            width: 50vw;
            clip-path: polygon(50% 0, 100% 0, 100% 100%, 50% 100%, 50% 0);
          "
        >
          <img src="img/sad_spaghet.webp" alt="" />
          <p style="margin-right: 4rem">Sad Spaghetti</p>
        </figure>
      </article>
      <article class="slide">
        <h2>More Connections is More Complexity</h2>
        <p>
          At the point you have 45 phones, you'll have a thousand connections!!!
        </p>
        <div>
          <svg
            style="
              border-left: 3px solid silver;
              border-bottom: 3px solid silver;
            "
            height="250"
            width="400"
            viewBox="5 0 200 102"
          >
            <polyline
              fill="none"
              points="0,100 10,100 20,99 30,97 40,94 50,90 60,85 70,79 80,72 90,64 100,55 110,45 120,34 130,22 140,9 150,-5"
            />
            <circle cx="30" cy="97" r="4" />
            <circle cx="60" cy="85" r="4" />
            <circle cx="90" cy="64" r="4" />
            <circle cx="120" cy="34" r="4" />
          </svg>
        </div>
        <p class="delayed">
          Each of these connections represents a unique function, method or
          configuration parameters
        </p>
        <p class="delayed">
          Exponential relationships are scary & hard to manage!
        </p>
      </article>
      <article class="slide">
        <h2>Managing Connections</h2>
        <ul>
          <li>
            We need to think carefully about how to organize these connections
          </li>
          <li>
            Applications can't work without the parts
            communicating/connecting...
          </li>
          <li>
            But if you connect all parts of your app to every other part:
            <ol>
              <li>It becomes hard to manage</li>
              <li>You've lost all degrees of freedom</li>
              <li>That's called "tightly coupled" code</li>
              <li>
                It means you can't rearrange the code without breaking something
              </li>
            </ol>
          </li>
        </ul>

        <p>
          You won't have
          <strong>scalable, extensible, stable or clean</strong> code anymore
        </p>
        <div class="tilt-stamp delayed">
          <p>Let's go from üëá</p>
          <img src="img/new_old.jpeg" height="550px" alt="" />
          <p style="text-align: center">to this! ‚òùÔ∏è</p>
        </div>
      </article>
      <article class="slide">
        <h2>Adding Organization</h2>
        <p>
          What if we add something that can manage and route those connections
        </p>
        <p class="delayed">...like a <strong>Hub</strong>!</p>
        <div class="flex">
          <svg
            class="hub delayed"
            width="500"
            height="350"
            viewBox="200 150 200 160"
            style="scale: 1.4"
          >
            <g class="hub-links"></g>
            <g class="hub-nodes"></g>
          </svg>
          <div class="delayed">
            <p>Number of Phones: <span class="node-annotation">15</span></p>
            <p>Number of Connections: <span class="cxn-annotation">15</span></p>
            <p>Number of phones and connections scale linearly!</p>
          </div>
        </div>
        <img class="delayed tilt-stamp" src="img/Atlanta_airport.jpg" alt="" />
      </article>
      <article class="slide">
        <h2>The Benefit</h2>
        <p style="text-align: left">The code is...</p>
        <ul>
          <li>Stable - Bug free and handles errors gracefully</li>
          <li>
            Clean - Code is easily understood by other devs & adheres to
            standards
          </li>
          <li>
            Scalable - Code can accomodate large numbers of users and/or data
          </li>
          <li>
            Extensible - Easy to add new features without disrupting old
            features
          </li>
          <li>
            Loosely Coupled - Easy to remove legacy features without disrupting
            new ones
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>A Hub is called a Controller</h2>
        <p>
          In programming, there is a well established pattern that uses this
          <br /><strong>Hub</strong> approach
        </p>
        <br />
        <p>It's called the <strong>MVC</strong> pattern</p>
        <p>
          <strong>M</strong>odel - <strong>V</strong>iew -
          <strong>C</strong>ontroller
        </p>
      </article>
      <article class="slide">
        <h2>*Ô∏è‚É£ Model View Controller</h2>
        <p>How to organize the responsibilites (or concerns) of our code</p>
        <p>MV - C / VM / P / *Ô∏è‚É£</p>
        <ul>
          <li>Controllers</li>
          <li>View Models</li>
          <li>Presenters</li>
          <li>
            *Ô∏è‚É£ (whatever you want to call it, all are very similar concepts)
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>MVC Pattern</h2>
        <ul>
          <li>
            <strong>Model</strong>: Responsible for the app's data and state
          </li>
          <li>
            <strong>View</strong>: Responsible for rendering the UI to the
            screen
          </li>
          <li>
            <strong>Controller</strong>: Responsible for connecting the Model
            and the View. Provides the update and feedback logic between them.
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>Hypothetical Calendar app</h2>
        <ol>
          <strong>Which would be part of the Model?</strong>
          <li>The buttons to sort by month</li>
          <li>The array of dates of events</li>
          <li>The render function to display the calendar area</li>
        </ol>
      </article>
      <article class="slide">
        <h2>Video App</h2>
        <ol>
          <strong>Which are part of the view?</strong>
          <li>The array of urls of videos</li>
          <li>The search input element</li>
          <li>the function that adds a URL to a playlist</li>
          <li>the area where the video is displayed</li>
        </ol>
      </article>
      <article class="slide">
        <h2>Code-along</h2>
        <p>Let's see how we can use an MVC pattern in a small app!</p>
        <p>We're going to code up a note-taking app</p>
        <details class="notes">
          Check out the repo:
          <a href="https://github.com/JamieVaughn/note-taker">note-taker</a>
        </details>
      </article>
      <article class="slide">
        <h2>Complete these Challenges:</h2>
        <p>Can you extend our MVC note-taker app with these new features?</p>
        <ol>
          <li>‚òëÔ∏è Add a localStorage clear all button</li>
          <li>‚òëÔ∏è Add a timestamp for each note</li>
          <li>‚òëÔ∏è Add a delete single note feature</li>
          <li>
            Think about where each of these would go in the MVC architecture
          </li>
          <li>
            Start to consider if our Dragon Clicker can be architected in a
            similar way
          </li>
        </ol>
      </article>
      <article class="slide">
        <h2>Our Favorite Client called again</h2>
        <h3 class="delayed">üòë (seriously?)</h3>
        <p class="delayed">
          They heard about this <strong>MVC</strong> thing & they want their
          Dragon Clicker App to use it
        </p>
      </article>
      <article class="slide">
        <h2>Dragon üß¨ Spawner: Premium</h2>
        <p>Planning our MVC Refactoring</p>
        <ul>
          <li>
            App Requirements are same as before, but our implementation will
            change
          </li>
          <li>
            Decide which elements belong in the <strong>M</strong>, the
            <strong>V</strong> or the <strong>C</strong>
          </li>
          <li>
            No storing our model in the DOM anymore, use a data type, like an
            array
          </li>
          <li>Be sure to generate your List View from your Model, too</li>
          <li>
            No mutating the model from the View, anymore, route mutations
            through the controller
          </li>
          <li>
            Define a <code>render</code> function to repaint the View & call it
            after any updates to the model
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>"View is a Function of State"</h2>
        <img src="img/ui_state.png" alt="" /><br />
        <img src="img/function_of_state.png" class="delayed" alt="" />
        <img
          src="img/state_view.png"
          class="delayed tilt-stamp"
          alt=""
          style="width: 40vw"
        />
      </article>
      <article class="slide">
        <h2>Remember Pure Functions and Side Effects?</h2>
        <p>These concepts can organize our MVC pattern</p>
        <ul>
          <li>
            <strong>Pure functions</strong> don't mutate
            <strong>global State</strong>
          </li>
          <li>
            They recieve parameters, perform some transformation & then return a
            value
          </li>
          <li>
            The <em>Controller</em> can use (ideally) all
            <strong>pure functions</strong>
          </li>
          <li>Think of the <em>Controller</em> as the "brains" of the app</li>
          <li>
            <strong>Pure functions</strong> can help us push our
            <strong>Side Effects</strong> to the "edges" of our app
          </li>
          <li>
            A good rule of thumb is to think of the <em>Model</em> and the
            <em>View</em> as the two "edges"
          </li>
        </ul>
      </article>
      <article class="slide">
        <h2>Sorting Our Code into each Part</h2>
        <ul>
          <li>The <em>Model</em> can have all of the:</li>
          <ul>
            <li>
              <strong>Statefulness</strong> (i.e. data that describes the app
              state)
            </li>
            <li>
              Functions w/ side-effects that
              <strong>create or mutate</strong> the <em>Model</em>
            </li>
          </ul>
          <li>The <em>Controller</em> can have:</li>
          <ul>
            <li>Pure functions that transmit messages between Model & View</li>
            <li>
              Pure functions that handle calculations, data transforms &
              business logic
            </li>
          </ul>
          <li>The <em>View</em> can have functions that:</li>
          <ul>
            <li>
              Dispatch user input as <strong>Commands</strong> (i.e. invokes
              <em>Controller</em> methods)
            </li>
            <li>
              Update/mutate/reference the
              <strong>implicit state of the DOM</strong> (i.e. render UI)
            </li>
          </ul>
        </ul>
      </article>
      <article class="slide">
        <h2>MVC designations for our App's elements</h2>
        <ul style="list-style: none">
          <li class="delayed">
            1. <strong>The Clickable list of dragons?</strong>
          </li>
          <li class="delayed">
            ‚§∑ View <br />
            2. <strong>The Array of the dragon objects?</strong>
          </li>
          <li class="delayed">
            ‚§∑ Model <br />
            3. <strong>The display area for Dragons?</strong>
          </li>
          <li class="delayed">
            ‚§∑ View <br />
            4.
            <strong
              >The <code>increment()</code> or
              <code>getDragons()</code> functions?</strong
            >
          </li>
          <li class="delayed">
            ‚§∑ Controller <br />
            5. <strong>The Array of dragon types?</strong>
          </li>
          <li class="delayed">‚§∑ Model</li>
        </ul>
      </article>
      <article class="slide">
        <h2>Our Dragon Model</h2>
        <pre class="language-js"><code>const Model = {

  dragonList: [ // the navbar types
    'fire', 
    'air', 
    ... 
  ],

  dragons = [
    {id: 0, type: 'fire', clicks: 0, img: 'üêâ'},
    {id: 1, type: 'air', clicks: 0, img: 'üêâ'},
    ...
  ],

  dragonFactory(type) {...} // could go in Model or Controller
}</code></pre>
        <span class="delayed tilt-stamp"
          >‚Üê unique <code>id</code>s distinguish dragons with the same
          type!</span
        >
      </article>
      <article class="slide">
        <h2>Our Dragon View(s?)</h2>
        <div class="flex">
          <div>
            <img src="img/dragon_clicker_screencap.jpg" alt="" />
          </div>
          <div>
            <ol>
              <li>List of Dragon Types</li>
              <li>Display area for Dragon Cards</li>
            </ol>
            <ul style="border-top: 2px solid silver">
              <br />
              <li>
                They are different areas and they are rerendered by different
                triggers
              </li>
              <li>
                Could it make sense to have two view objects to handle each
                independently?
              </li>
            </ul>
          </div>
        </div>
      </article>
      <article class="slide">
        <h2>Views</h2>
        <pre class="language-js"><code>const View1 = { // manages the nav view
  node,
  initializeView1(),
  templateFactoryFn(list),
  renderView1()
}

const View2 = { // manages the display area view
  node, 
  initializeView2(),
  templateFactoryFn(dragon),
  renderView2()
}</code></pre>
      </article>
      <article class="slide">
        <h2>Our Dragon Controller</h2>
        <pre class="language-js"><code>const Controller = {
  init(),
  increment(),
  getList(),
  getDragons(),
  dispatchCommand(action) // often shortened to dispatch()
  // dragonFactory(type), // could be here or Model
  // hide
  // filter
  // delete
  // modify etc...
}</code></pre>
      </article>
      <article class="slide">
        <h2>Our MVC Blueprint - Let's Build it!!</h2>
        <div class="flex" style="gap: 6px; align-items: stretch">
          <pre class="language-js"><code>const Model = { 
  list: [...types],
  dragons: [
    {...}, 
    {...},
    ...
  ],
  dragonFactory(type)
}</code></pre>
          <pre class="language-js"><code>const View = {
  node,
  init(),
  templateFactory(),
  render()
}
// Could have
// a MainView 
// & ListView</code></pre>
          <pre class="language-js"><code>const Controller = {
  init(),
  getList(),
  getDragons(),
  increment(),
  dispatch(type)
}</code></pre>
        </div>
        <p>Could each of these be in a separate js file? Maybe Modules?</p>
      </article>
      <article class="slide">
        <h2>Reflections</h2>
        <ul class="big-line">
          <li>
            Does <code>View</code> get called within your <code>Model</code>?
          </li>
          <li>
            Does <code>Model</code> get called within your <code>View</code>?
          </li>
          <li>
            How many times does <code>Controller</code> get called in
            <code>View</code> and <code>Model</code>?
          </li>
          <li>
            How many times does each <code>View</code> and
            <code>Model</code> get called within <code>Controller</code>?
          </li>
        </ul>
      </article>
      <article class="slide">
        <p>The Client loves <strong>Dragon üß¨ Spawner: Premium</strong></p>
        <p class="delayed">
          <em>But they're insisting on one final req change <span style="font-size: 4rem">ü§¶üèΩ‚Äç‚ôÄÔ∏è</span></em>
        </p>
        <div class="delayed">
          <strong
            > (Last one, I promise!)</strong
          >
        </div>
      </article>
      <article class="slide">
        <h2>Dragon üèüÔ∏è Arena</h2>
        <p>
          <strong>Code Along:</strong> Let's spice up our clicker app into an actual battle arena game!
        </p>
        <ol><strong>Game Features</strong>
          <li>Turn <code>clicks</code> into <code>hitPoints</code> (HP) with an initial amount</li>
          <li>Instead of clicking, we'll add swiping/slashing action</li>
          <li>Defeat a dragon by swiping/slashing their HP down to zero!</li>
          <li>Defeated dragons may drop some beneficial loot!</li>
          <li>Dragons will be added to the arena automatically on a timer</li>
        </ol>
      </article>
      <!-- <article class="slide">
        <h2>Dragon üèØ Dojo</h2>
        <ol>
          <strong>For this implementation:</strong>
          <li>
            Each üêâ in the list is unique & can't be duplicated and only one
            shows up at a time on click
          </li>
          <li>
            The üêâ's click count should persist even if it's not currently being
            displayed
          </li>
          <li>
            Add new properties for each dragon:
            <ol type="i">
              <li>
                <code>level</code>: increases everytime
                <code>clicks</code> double in size
              </li>
              <li>
                <code>ability</code>: text of a martial ability the dragon
                possesses (i.e. "fire bolt")
              </li>
            </ol>
          </li>
          <li>
            Add a separate Admin view
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog#result"
              >modal</a
            >
            that displays on ctrl+clicking a dragon
          </li>
          <li>
            The Admin view opens a <code>form</code> to update properties
            (clicks, level, ability) for selected dragon
          </li>
          <li>
            <code>form</code> submission should update the model of the
            currently selected dragon & the view should reflect the changes
          </li>
          <li>
            They should be able to close the Admin view modal w/ or w/o
            submitting
          </li>
          <li>
            <strong>Bonus</strong>: Add an option in the admin modal to add a
            completely new dragon type, with it's own color & icon/img
          </li>
        </ol>
      </article> -->
    </section>

    <!-- Dragon Arena Pro Draft (with Modules) -->

    <footer class="slide" title="The End">Thank you!</footer>

    <script src="../lib/inspire.js"></script>
    <script src="../laser/laser.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.0.0/dist/d3.min.js"></script>
    <script defer>
      let width = 600,
        height = 450;

      let hubNodes = [
        { name: "üì°" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
        { name: "üìû" },
      ];
      let noHubNodes = [
        { id: 0, name: "üìû" },
        { id: 1, name: "üìû" },
        // {name: 'üìû'},
        // {name: 'üìû'},
        // {name: 'üìû'},
        // {name: 'üìû'},
        // {name: 'üìû'},
        // {name: 'üìû'},
        // {name: 'üìû'},
      ];

      let phones = 2;
      let nodeAnnotation = document.querySelector(".node-annotation");
      let cxnAnnotation = document.querySelector(".cxn-annotation");

      function addPhone(e) {
        console.log("phone");
        phones++;
        noHubNodes = Array.from({ length: phones }).map((i, id) => ({
          id,
          name: "üìû",
        }));
        noHubLinks = [];
        noHubNodes.forEach((node) => {
          noHubNodes.forEach((n) => {
            if (node !== n) noHubLinks.push({ source: node, target: n });
          });
        });
        nodeAnnotation.innerText = noHubNodes.length;
        cxnAnnotation.innerText =
          (noHubNodes.length * (noHubNodes.length - 1)) / 2;
        simulation(noHubNodes, noHubLinks);
      }

      let noHubLinks = [];
      let hubLinks = [];

      noHubNodes.forEach((node) => {
        noHubNodes.forEach((n) => noHubLinks.push({ source: node, target: n }));
      });

      hubNodes.forEach((node) => {
        hubLinks.push({ source: node, target: hubNodes[0] });
      });

      let simulation = (nodes, links, flag) => {
        d3.forceSimulation(nodes)
          .force("charge", d3.forceManyBody().strength(-100))
          .force("center", d3.forceCenter(width / 2, height / 2))
          .force("link", d3.forceLink().links(links))
          .on("tick", flag == "hub" ? tickHub : tickNoHub);
      };

      function updateLinks(className, links) {
        d3.select(className)
          .selectAll("line")
          .data(links)
          .join("line")
          .attr("x1", function (d) {
            return d.source.x;
          })
          .attr("y1", function (d) {
            return d.source.y;
          })
          .attr("x2", function (d) {
            return d.target.x;
          })
          .attr("y2", function (d) {
            return d.target.y;
          });
      }

      function updateNodes(className, nodes) {
        d3.select(className)
          .selectAll("text")
          .data(nodes)
          .join("text")
          .text(function (d) {
            return d.name;
          })
          .attr("x", function (d) {
            return d.x;
          })
          .attr("y", function (d) {
            return d.y;
          })
          .attr("dy", function (d) {
            return 5;
          });
      }

      function tickHub() {
        updateLinks(".hub-links", hubLinks);
        updateNodes(".hub-nodes", hubNodes);
      }
      function tickNoHub() {
        updateLinks(".nohub-links", noHubLinks);
        updateNodes(".nohub-nodes", noHubNodes);
      }

      simulation(noHubNodes, noHubLinks);
      simulation(hubNodes, hubLinks, "hub");
    </script>
    <script defer async>
      document.querySelector("#current-year").innerText =
        "/" + new Date().getFullYear();
    </script>
  </body>
</html>
